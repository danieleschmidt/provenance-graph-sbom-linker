{
	"name": "Provenance Graph SBOM Linker",
	"image": "mcr.microsoft.com/devcontainers/go:1.21-bullseye",
	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {},
		"ghcr.io/devcontainers/features/node:1": {
			"version": "18"
		},
		"ghcr.io/devcontainers/features/python:1": {
			"version": "3.11"
		}
	},
	"customizations": {
		"vscode": {
			"extensions": [
				"golang.go",
				"ms-vscode.vscode-docker",
				"ms-kubernetes-tools.vscode-kubernetes-tools",
				"redhat.vscode-yaml",
				"ms-python.python",
				"ms-python.black-formatter",
				"charliermarsh.ruff",
				"bradlc.vscode-tailwindcss",
				"esbenp.prettier-vscode",
				"github.vscode-github-actions",
				"ms-vscode.test-adapter-converter",
				"neo4j.cypher",
				"ms-azuretools.vscode-docker",
				"github.copilot",
				"github.copilot-chat"
			],
			"settings": {
				"go.toolsManagement.checkForUpdates": "local",
				"go.useLanguageServer": true,
				"go.formatTool": "goimports",
				"go.lintTool": "golangci-lint",
				"go.testFlags": ["-v", "-race"],
				"go.coverOnSave": true,
				"go.coverageDecorator": {
					"type": "gutter",
					"coveredHighlightColor": "rgba(64,128,64,0.5)",
					"uncoveredHighlightColor": "rgba(128,64,64,0.5)"
				},
				"python.defaultInterpreterPath": "/usr/local/bin/python",
				"python.formatting.provider": "black",
				"python.linting.enabled": true,
				"python.linting.ruffEnabled": true,
				"editor.formatOnSave": true,
				"editor.codeActionsOnSave": {
					"source.organizeImports": true
				},
				"files.associations": {
					"*.yml": "yaml",
					"*.yaml": "yaml",
					"Dockerfile*": "dockerfile",
					"*.cypher": "cypher"
				},
				"yaml.schemas": {
					"https://json.schemastore.org/github-workflow.json": ".github/workflows/*.yml",
					"https://json.schemastore.org/github-action.json": ".github/actions/*/action.yml",
					"https://raw.githubusercontent.com/compose-spec/compose-spec/master/schema/compose-spec.json": "docker-compose*.yml"
				},
				"terminal.integrated.defaultProfile.linux": "bash"
			}
		}
	},
	"postCreateCommand": "bash .devcontainer/post-create.sh",
	"remoteUser": "vscode",
	"containerEnv": {
		"CGO_ENABLED": "1",
		"GOOS": "linux",
		"GOARCH": "amd64"
	},
	"mounts": [
		"source=${localWorkspaceFolder}/.git,target=/workspace/.git,type=bind,consistency=cached",
		"source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
	],
	"forwardPorts": [
		8080,
		7474,
		7687,
		3000,
		9090,
		3001
	],
	"portsAttributes": {
		"8080": {
			"label": "Provenance API",
			"onAutoForward": "notify"
		},
		"7474": {
			"label": "Neo4j Browser",
			"onAutoForward": "silent"
		},
		"7687": {
			"label": "Neo4j Bolt",
			"onAutoForward": "silent"
		},
		"3000": {
			"label": "Web Dashboard",
			"onAutoForward": "notify"
		},
		"9090": {
			"label": "Prometheus",
			"onAutoForward": "silent"
		},
		"3001": {
			"label": "Grafana",
			"onAutoForward": "silent"
		}
	}
}