# Provenance Graph SBOM Linker - Environment Configuration

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Neo4j Graph Database
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password
NEO4J_DATABASE=neo4j
NEO4J_MAX_CONNECTION_POOL_SIZE=100
NEO4J_CONNECTION_TIMEOUT=30s
NEO4J_MAX_TRANSACTION_RETRY_TIME=15s

# Redis Cache
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_IDLE_CONNECTIONS=10
REDIS_MAX_ACTIVE_CONNECTIONS=100

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Server Settings
API_PORT=8080
API_HOST=0.0.0.0
API_BASE_PATH=/api/v1
API_REQUEST_TIMEOUT=30s
API_MAX_REQUEST_SIZE=10MB

# CORS Settings
API_CORS_ORIGINS=http://localhost:3000,http://localhost:8080
API_CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
API_CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# Rate Limiting
API_RATE_LIMIT_REQUESTS_PER_MINUTE=1000
API_RATE_LIMIT_BURST=100

# =============================================================================
# AUTHENTICATION & AUTHORIZATION
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h
JWT_ISSUER=provenance-linker
JWT_AUDIENCE=provenance-api

# OIDC/OAuth2 Configuration
OIDC_ISSUER_URL=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_REDIRECT_URL=http://localhost:8080/auth/callback
OIDC_SCOPES=openid,profile,email

# API Key Authentication
API_KEY_HEADER=X-API-Key
API_KEY_ENABLED=true

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORTER_OTLP_INSECURE=true
OTEL_SERVICE_NAME=provenance-linker
OTEL_SERVICE_VERSION=1.0.0
OTEL_RESOURCE_ATTRIBUTES=environment=development

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics
PROMETHEUS_NAMESPACE=provenance

# Jaeger Tracing
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_SAMPLER_TYPE=const
JAEGER_SAMPLER_PARAM=1

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/provenance-linker.log

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Artifact Storage
ARTIFACT_STORE_TYPE=filesystem
ARTIFACT_STORE_PATH=/var/lib/provenance/artifacts
ARTIFACT_STORE_MAX_SIZE=10GB

# S3 Configuration (when ARTIFACT_STORE_TYPE=s3)
S3_BUCKET=provenance-artifacts
S3_REGION=us-west-2
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_ENDPOINT=
S3_USE_SSL=true

# Azure Blob Storage (when ARTIFACT_STORE_TYPE=azure)
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_STORAGE_CONTAINER=provenance-artifacts

# GCS Configuration (when ARTIFACT_STORE_TYPE=gcs)
GCS_BUCKET=provenance-artifacts
GCS_PROJECT_ID=
GCS_CREDENTIALS_PATH=/etc/gcs/credentials.json

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Cosign/Sigstore
COSIGN_ENABLED=true
COSIGN_PUBLIC_KEY_PATH=/etc/cosign/cosign.pub
COSIGN_EXPERIMENTAL=false
SIGSTORE_ROOT_CA=/etc/sigstore/root.pem
TUF_ROOT=/etc/tuf

# Policy Configuration
POLICY_ENGINE_ENABLED=true
POLICY_CONFIG_PATH=/etc/policies
DEFAULT_POLICY_PATH=/etc/policies/default.yaml

# Certificate Management
TLS_ENABLED=true
TLS_CERT_PATH=/etc/tls/tls.crt
TLS_KEY_PATH=/etc/tls/tls.key
TLS_CA_PATH=/etc/tls/ca.crt
TLS_MIN_VERSION=1.2

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# GitHub Integration
GITHUB_TOKEN=
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY_PATH=/etc/github/private-key.pem
GITHUB_WEBHOOK_SECRET=

# GitLab Integration
GITLAB_TOKEN=
GITLAB_URL=https://gitlab.com
GITLAB_WEBHOOK_SECRET=

# Container Registry
REGISTRY_URL=
REGISTRY_USERNAME=
REGISTRY_PASSWORD=
REGISTRY_INSECURE=false

# Vulnerability Databases
GRYPE_DB_UPDATE_FREQUENCY=24h
TRIVY_DB_UPDATE_FREQUENCY=24h
OSV_API_URL=https://api.osv.dev

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================

# Worker Configuration
WORKER_POOL_SIZE=10
WORKER_QUEUE_SIZE=1000
WORKER_TIMEOUT=300s

# SBOM Processing
SBOM_PARSER_TIMEOUT=60s
SBOM_MAX_SIZE=100MB
SBOM_SUPPORTED_FORMATS=cyclonedx,spdx,syft

# Graph Processing
GRAPH_BATCH_SIZE=1000
GRAPH_MAX_DEPTH=20
GRAPH_QUERY_TIMEOUT=30s

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Mode
DEV_MODE=false
DEBUG_MODE=false
PROFILE_ENABLED=false

# Testing
TEST_DATABASE_URI=bolt://localhost:7688
TEST_REDIS_URL=redis://localhost:6380
TEST_ARTIFACT_STORE_PATH=/tmp/test-artifacts

# Mock Services
MOCK_SIGSTORE=false
MOCK_REGISTRY=false
MOCK_VULNERABILITY_SCANNER=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental Features
ENABLE_BLOCKCHAIN_INTEGRATION=false
ENABLE_QUANTUM_RESISTANT_CRYPTO=false
ENABLE_FEDERATED_PROVENANCE=false
ENABLE_AI_THREAT_DETECTION=false

# Beta Features
ENABLE_ADVANCED_ANALYTICS=false
ENABLE_NATURAL_LANGUAGE_QUERIES=false
ENABLE_AUTOMATED_COMPLIANCE=true

# =============================================================================
# COMPLIANCE & GOVERNANCE
# =============================================================================

# Compliance Frameworks
NIST_SSDF_ENABLED=true
EU_CRA_ENABLED=true
SOC2_ENABLED=false
ISO27001_ENABLED=false

# Data Retention
DATA_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=2555
BACKUP_RETENTION_DAYS=90

# Privacy
GDPR_COMPLIANCE=false
CCPA_COMPLIANCE=false
DATA_ANONYMIZATION=false

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Kubernetes
K8S_NAMESPACE=provenance-system
K8S_SERVICE_ACCOUNT=provenance-linker
K8S_CLUSTER_NAME=production

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/live

# Graceful Shutdown
SHUTDOWN_TIMEOUT=30s
SHUTDOWN_DELAY=5s

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Memory Management
GO_MAX_PROCS=0
GO_GC_PERCENT=100
GO_MEMORY_LIMIT=4GB

# Connection Pooling
HTTP_CLIENT_TIMEOUT=30s
HTTP_CLIENT_MAX_IDLE_CONNECTIONS=100
HTTP_CLIENT_MAX_CONNECTIONS_PER_HOST=10

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_TIMEOUT=10s
CIRCUIT_BREAKER_MAX_REQUESTS=10
CIRCUIT_BREAKER_INTERVAL=60s
CIRCUIT_BREAKER_RATIO=0.6